<header class="admin-header">
    <h1 class="admin-page-title">Products</h1>
    <div class="admin-header-actions">
        <button type="button" class="btn btn-secondary" id="refreshProductsBtn">
            <i class="fas fa-refresh"></i> Refresh
        </button>
        <button type="button" class="btn btn-primary" id="syncProductsBtn">
            <i class="fas fa-sync-alt"></i> Sync from Printful
        </button>
    </div>
</header>

<div class="admin-content">
    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon products">
                <i class="fas fa-box"></i>
            </div>
            <div class="stat-info">
                <span class="stat-label">Total Products</span>
                <span class="stat-value" id="totalProducts">-</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon synced">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <span class="stat-label">Synced</span>
                <span class="stat-value" id="syncedProducts">-</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon active">
                <i class="fas fa-eye"></i>
            </div>
            <div class="stat-info">
                <span class="stat-label">Active</span>
                <span class="stat-value" id="activeProducts">-</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon featured">
                <i class="fas fa-star"></i>
            </div>
            <div class="stat-info">
                <span class="stat-label">Featured</span>
                <span class="stat-value" id="featuredProducts">-</span>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="admin-filters">
        <div class="filter-group">
            <label for="statusFilter">Status:</label>
            <select id="statusFilter" class="form-select">
                <option value="all">All Products</option>
                <option value="active">Active Only</option>
                <option value="inactive">Inactive Only</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="syncFilter">Sync:</label>
            <select id="syncFilter" class="form-select">
                <option value="all">All</option>
                <option value="synced">Synced</option>
                <option value="unsynced">Not Synced</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="categoryFilter">Category:</label>
            <select id="categoryFilter" class="form-select">
                <option value="all">All Categories</option>
                <option value="tshirts">T-Shirts</option>
                <option value="hoodies">Hoodies</option>
                <option value="sweatshirts">Sweatshirts</option>
                <option value="accessories">Accessories</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="filter-group">
            <input
                type="text"
                id="searchInput"
                class="form-input"
                placeholder="Search products..."
            />
        </div>
    </div>

    <!-- Products Table -->
    <section class="admin-section">
        <div class="table-container">
            <table class="admin-table" id="productsTable">
                <thead>
                    <tr>
                        <th class="th-image">Image</th>
                        <th class="th-name sortable" data-sort="name">Name</th>
                        <th class="th-category">Category</th>
                        <th class="th-price sortable" data-sort="price">Price</th>
                        <th class="th-variants">Variants</th>
                        <th class="th-status">Status</th>
                        <th class="th-sync">Sync</th>
                        <th class="th-date sortable" data-sort="date">Created</th>
                        <th class="th-actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="productsTableBody">
                    <tr>
                        <td colspan="9" class="loading-state">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>Loading products...</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<!-- Edit Product Modal -->
<div class="modal-overlay" id="editProductModal">
    <div class="modal modal-lg">
        <div class="modal-header">
            <h3 class="modal-title">Edit Product</h3>
            <button type="button" class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="editProductForm">
            <div class="modal-body">
                <input type="hidden" id="editProductId" />

                <div class="form-row">
                    <div class="form-group flex-2">
                        <label for="editProductName" class="form-label">Product Name</label>
                        <input type="text" id="editProductName" class="form-input" required />
                    </div>
                    <div class="form-group flex-1">
                        <label for="editProductPrice" class="form-label">Price ($)</label>
                        <input
                            type="number"
                            id="editProductPrice"
                            class="form-input"
                            step="0.01"
                            min="0"
                            required
                        />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group flex-1">
                        <label for="editProductCategory" class="form-label">Category</label>
                        <select id="editProductCategory" class="form-select">
                            <option value="tshirts">T-Shirts</option>
                            <option value="hoodies">Hoodies</option>
                            <option value="sweatshirts">Sweatshirts</option>
                            <option value="accessories">Accessories</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group flex-1">
                        <label for="editProductComparePrice" class="form-label"
                            >Compare Price ($)</label
                        >
                        <input
                            type="number"
                            id="editProductComparePrice"
                            class="form-input"
                            step="0.01"
                            min="0"
                        />
                    </div>
                </div>

                <div class="form-group">
                    <label for="editProductDescription" class="form-label">Description</label>
                    <textarea id="editProductDescription" class="form-textarea" rows="4"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-check">
                        <input type="checkbox" id="editProductActive" class="form-checkbox" />
                        <label for="editProductActive">Active (visible in store)</label>
                    </div>
                    <div class="form-check">
                        <input type="checkbox" id="editProductFeatured" class="form-checkbox" />
                        <label for="editProductFeatured">Featured (shown on homepage)</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" id="deleteConfirmModal">
    <div class="modal modal-sm">
        <div class="modal-header">
            <h3 class="modal-title">Delete Product</h3>
            <button type="button" class="modal-close" data-dismiss="modal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete <strong id="deleteProductName"></strong>?</p>
            <p class="text-muted">This action cannot be undone.</p>
            <input type="hidden" id="deleteProductId" />
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
        </div>
    </div>
</div>

<!-- Sync Progress Modal -->
<div class="modal-overlay" id="syncProgressModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title">Syncing Products</h3>
        </div>
        <div class="modal-body">
            <div class="sync-progress">
                <div class="sync-spinner">
                    <i class="fas fa-sync-alt fa-spin"></i>
                </div>
                <p class="sync-message" id="syncMessage">Connecting to Printful...</p>
            </div>
            <div class="sync-log" id="syncLog"></div>
        </div>
        <div class="modal-footer" id="syncModalFooter" style="display: none">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
    </div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>
